<head>

    <title>TDs</title>
    <%= stylesheet_link_tag 'tds', plugin: 'tds' %>

</head>

<h2>TDs</h2>

<table>
  <thead>

    <tr>
    	<th>Issue ID</th>
    	<th>TD ID</th>
    	<th>Type</th>
    	<th>Tracker</th>
    	<th>Status</th>
    	<th>Subject</th>
    	<th>Assignee</th>
        <th>Switch</th>
        <th>Delete</th>
    </tr>

  </thead>

  <tbody>
    <% @tds.each do |td| %>
      <tr>
	    <th><%= td.issue.id %></th>
    	<th><%= td.id %></th>
    	<th><%= td.td_type %></th>
    	<th><%= td.issue.tracker %></th>
    	<th><%= td.issue.status %></th>
    	<th><%= td.issue.subject %></th>
    	<th><%= td.issue.assigned_to %></th>
        <th><%= link_to 'Switch', { action: 'switch', id: td[:id], project_id: @project }, method: :post %></th>
        <th><%= link_to 'Delete', td_path(project_id: @project, id: td), method: :delete %></th>
      </tr>
    <% end %>
  </tbody>
</table>

<%= form_with url: create_td_path, method: :post, local: true do |form| %>
  <%= form.hidden_field :project_id, value: @project.id %>
  <div class="type_field">
    <%= form.label :td_type %>
    <%= form.select :td_type, ['Requisitos', 'Testes', 'Usabilidade'] %>
  </div>
  <div class="project_id_field">
    <%= form.label :issue_id %>
    <%= form.text_field :issue_id, type: 'number'%>
  </div>
  <div class="actions">
    <%= form.submit "Create TD" %>
  </div>
<% end %>


